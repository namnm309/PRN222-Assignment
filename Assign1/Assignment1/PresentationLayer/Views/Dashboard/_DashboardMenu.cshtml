@using DataAccessLayer.Enum
@{
    var userRole = ViewBag.UserRole as UserRole?;
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
}

<!-- TỔNG QUAN - Common cho tất cả roles -->
<div class="menu-section">
    <div class="menu-title">TỔNG QUAN</div>
    <a href="@Url.Action("Index", "Dashboard")" class="menu-item @(currentAction == "Index" ? "active" : "")">
        <i class="fas fa-tachometer-alt"></i>
        <span>Dashboard</span>
    </a>
    <a href="@Url.Action("Index", "Home")" class="menu-item">
        <i class="fas fa-home"></i>
        <span>Trang chủ</span>
    </a>
</div>

@if (userRole == UserRole.DealerStaff)
{
    <!-- MENU CHO DEALER STAFF -->
    <div class="menu-section">
        <div class="menu-title">QUẢN LÝ BÁN HÀNG</div>
        <a href="#" class="menu-item">
            <i class="fas fa-shopping-cart"></i>
            <span>Đơn hàng của tôi</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-users"></i>
            <span>Khách hàng</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-calendar-check"></i>
            <span>Lịch lái thử</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">HỖ TRỢ</div>
        <a href="#" class="menu-item">
            <i class="fas fa-search"></i>
            <span>Tra cứu xe</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-comments"></i>
            <span>Phản hồi KH</span>
        </a>
    </div>
}
else if (userRole == UserRole.DealerManager)
{
    <!-- MENU CHO DEALER MANAGER -->
    <div class="menu-section">
        <div class="menu-title">QUẢN LÝ ĐẠI LÝ</div>
        <a href="#" class="menu-item">
            <i class="fas fa-chart-line"></i>
            <span>Báo cáo doanh số</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-file-invoice-dollar"></i>
            <span>Báo cáo công nợ</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-users-cog"></i>
            <span>Quản lý nhân viên</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">KINH DOANH</div>
        <a href="#" class="menu-item">
            <i class="fas fa-briefcase"></i>
            <span>Tạo báo giá & đơn hàng</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-tags"></i>
            <span>Quản lý khuyến mãi</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-box"></i>
            <span>Đặt xe từ hãng</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-shipping-fast"></i>
            <span>Theo dõi giao xe</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-credit-card"></i>
            <span>Quản lý thanh toán</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">KHÁCH HÀNG</div>
        <a href="#customersSubmenu" class="menu-item" data-bs-toggle="collapse" aria-expanded="false">
            <i class="fas fa-users"></i>
            <span>Quản lý khách hàng</span>
            <i class="fas fa-chevron-down ms-auto submenu-arrow"></i>
        </a>
        <div class="collapse submenu" id="customersSubmenu">
            <a href="#" class="submenu-item">
                <i class="fas fa-list"></i>
                <span>Danh sách khách hàng</span>
            </a>
            <a href="#" class="submenu-item">
                <i class="fas fa-folder"></i>
                <span>Hồ sơ khách hàng</span>
            </a>
            <a href="#" class="submenu-item">
                <i class="fas fa-user-plus"></i>
                <span>Thêm khách hàng mới</span>
            </a>
        </div>
        <a href="#" class="menu-item">
            <i class="fas fa-calendar-alt"></i>
            <span>Lịch hẹn lái thử</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-comments"></i>
            <span>Phản hồi & khiếu nại</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">HỆ THỐNG</div>
        <a href="#" class="menu-item">
            <i class="fas fa-cog"></i>
            <span>Cài đặt</span>
        </a>
    </div>
}
else if (userRole == UserRole.EVMStaff)
{
    <!-- MENU CHO EVM STAFF -->
    <div class="menu-section">
        <div class="menu-title">QUẢN LÝ SẢN PHẨM</div>
        <a href="@Url.Action("Products", "Dashboard")" class="menu-item">
            <i class="fas fa-car"></i>
            <span>Danh mục xe điện</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-boxes"></i>
            <span>Quản lý tồn kho</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-dollar-sign"></i>
            <span>Quản lý giá sỉ</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">ĐẠI LÝ & ĐỐI TÁC</div>
        <a href="#" class="menu-item">
            <i class="fas fa-handshake"></i>
            <span>Danh sách đại lý</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-file-contract"></i>
            <span>Hợp đồng & chỉ tiêu</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-chart-area"></i>
            <span>Doanh số theo khu vực</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">BÁO CÁO</div>
        <a href="#" class="menu-item">
            <i class="fas fa-warehouse"></i>
            <span>Tồn kho & tiêu thụ</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-chart-line"></i>
            <span>Báo cáo doanh số</span>
        </a>
    </div>
}
else if (userRole == UserRole.Admin)
{
    <!-- MENU CHO ADMIN - Full quyền -->
    <div class="menu-section">
        <div class="menu-title">QUẢN TRỊ HỆ THỐNG</div>
        <a href="#" class="menu-item">
            <i class="fas fa-users-cog"></i>
            <span>Quản lý tài khoản</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-shield-alt"></i>
            <span>Phân quyền</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-history"></i>
            <span>Lịch sử hoạt động</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">QUẢN LÝ SẢN PHẨM</div>
        <a href="#productsSubmenu" class="menu-item" data-bs-toggle="collapse" aria-expanded="false">
            <i class="fas fa-car"></i>
            <span>Danh mục xe điện</span>
            <i class="fas fa-chevron-down ms-auto submenu-arrow"></i>
        </a>
        <div class="collapse submenu" id="productsSubmenu">
            <a href="@Url.Action("Products", "Dashboard")" class="submenu-item">
                <i class="fas fa-list"></i>
                <span>Tất cả sản phẩm</span>
            </a>
            <a href="#" class="submenu-item">
                <i class="fas fa-plus"></i>
                <span>Thêm sản phẩm mới</span>
            </a>
            <a href="#" class="submenu-item">
                <i class="fas fa-tags"></i>
                <span>Danh mục</span>
            </a>
        </div>
        <a href="#" class="menu-item">
            <i class="fas fa-boxes"></i>
            <span>Quản lý tồn kho</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-dollar-sign"></i>
            <span>Quản lý giá sỉ</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-palette"></i>
            <span>Màu sắc & phiên bản</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">ĐẠI LÝ & ĐỐI TÁC</div>
        <a href="#" class="menu-item">
            <i class="fas fa-building"></i>
            <span>Quản lý đại lý</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-users"></i>
            <span>Tài khoản đại lý</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-file-contract"></i>
            <span>Hợp đồng & chỉ tiêu</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">PHÂN TÍCH & DỰ ĐOÁN</div>
        <a href="#" class="menu-item">
            <i class="fas fa-chart-area"></i>
            <span>Doanh số theo khu vực</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-warehouse"></i>
            <span>Tồn kho & tiêu thụ</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-robot"></i>
            <span>AI dự đoán nhu cầu</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">GIAO DIỆN</div>
        <a href="#" class="menu-item">
            <i class="fas fa-paint-brush"></i>
            <span>UI Homepage</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-images"></i>
            <span>Banner & Slider</span>
        </a>
    </div>
    
    <div class="menu-section">
        <div class="menu-title">HỆ THỐNG</div>
        <a href="#" class="menu-item">
            <i class="fas fa-chart-line"></i>
            <span>Báo cáo tổng hợp</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-cog"></i>
            <span>Cài đặt</span>
        </a>
        <a href="#" class="menu-item">
            <i class="fas fa-database"></i>
            <span>Backup & Restore</span>
        </a>
    </div>
}
